
//  ------------------------------  pagepiling

$(document).ready(function() {
	$('#pagepiling').pagepiling({
        anchors: ['firstPage', 'secondPage', 'thirdPage', 'fourthPage', 'fifthPage', 'sixthPage', 'seventhPage', 'eightPage','ninthPage'],
        menu: '#myMenu'
    });
});

//  ------------------------------  modal


let burgerMenu = document.querySelector('.burger-menu');
let navModal = document.querySelector('.nav-modal');
let modalClose = document.querySelector('.nav-modal__close');
let modalItem = document.getElementsByClassName('nav-modal__item');


burgerMenu.addEventListener('click', function(){
    navModal.classList.add('nav-modal__active');
})

for(let i = 0; i < modalItem.length; i++){

    let modalItemCurent = modalItem[i];

    modalItemCurent.addEventListener('click', function(){
        navModal.classList.remove('nav-modal__active');

    })
}
modalClose.addEventListener('click', function(){
    navModal.classList.remove('nav-modal__active');
})

//  ------------------------------  slide__composition

const composition = document.getElementsByClassName('slide__composition');
const compMenu = document.getElementsByClassName('composotion__menu');

for(let i = 0; i<composition.length; i++){
    let compositionCurent = composition[i];
    let compMenuCurent = compMenu[i];

    compositionCurent.onmouseenter = function(){
        compMenuCurent.classList.add('composotion__menu__active');
    }
    compositionCurent.onmouseleave  = function(){
        compMenuCurent.classList.remove('composotion__menu__active');
    }
}



//  ------------------------------  team

const teamItem = document.getElementsByClassName('team__item');
const teamItemTitle = document.getElementsByClassName('team__item-title');

for(var i = 0; i < teamItemTitle.length; i++){

    let teamItemCurent = teamItem[i];
    
    teamItemTitle[i].addEventListener('click', function(){
        
        if(!(teamItemCurent.classList.contains('team__item__active'))){

            for(var j = 0; j < menuItem.length; j++){
                teamItem[j].classList.remove('team__item__active');
            }
            teamItemCurent.classList.add('team__item__active');

        }else{
            teamItemCurent.classList.remove('team__item__active');
        }
    })   
}


//  ------------------------------  menu


const menuItem = document.getElementsByClassName('menu__item');
const menuLink = document.getElementsByClassName('menu__link');
const menuText = document.getElementsByClassName('menu__item-text');
const menuItemClose = document.getElementsByClassName('menu__item__close');

function calculWidth(){
    let windowWidth = $(window).width();
    let links = $('.menu__link');
    let linkWidth = links.width();
    let totalWidth = windowWidth - linkWidth * links.length;

    return totalWidth > 550 ? 550 : totalWidth;
} 
for(var i = 0; i < menuLink.length; i++){

    let menuItemCurent = menuItem[i];
    let menuTextCurent = menuText[i];
    
    menuLink[i].addEventListener('click', function(){
        
        if(!(menuItemCurent.classList.contains('menu__item__active'))){

            for(var j = 0; j < menuItem.length; j++){
                menuItem[j].classList.remove('menu__item__active');
                menuText[j].style.width = 0 + 'px';
            }
            menuItemCurent.classList.add('menu__item__active');
            menuTextCurent.style.width = calculWidth() + 'px';

        }else{
            menuItemCurent.classList.remove('menu__item__active');
            menuTextCurent.style.width = 0 + 'px';
        }
    })   

    menuItemClose[i].addEventListener('click', function(){
        menuItemCurent.classList.remove('menu__item__active');
        menuTextCurent.style.width = 0 + 'px';
    })
}


//  ------------------------------  slider

$('.slider__items').slick({
    autoplay: false

});
 
//  ------------------------------  form

var myForm = document.querySelector('.form');
var sendButton = document.querySelector('.button__send');

var modalFormText = document.querySelector('.modal__form__text');

myForm.addEventListener('submit', function(event){
    event.preventDefault();
    let target = event.target;
    var formData = new FormData();
    
    formData.append('name', target.elements.name.value);
    formData.append('phone', target.elements.telephone.value);
    formData.append('comment', target.elements.coment.value);
    formData.append('to', 'armani0322@gmail.com');

    const xhr = new XMLHttpRequest();
    xhr.responseType = 'json';
    xhr.open('POST', 'https://webdev-api.loftschool.com/sendmail');
    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
    xhr.send(formData);

    xhr.addEventListener('load', function(){
        
        modalFormText.textContent = xhr.response.message;
        $('#formModal').arcticmodal();

    })
})

//  ------------------------------  reviews

var reviewsButtons = document.querySelectorAll('.button__reviews');
var reviewsTitle = document.querySelectorAll('.textblock__title');
var reviewsText = document.querySelectorAll('.textblock__text');

var modalTitle = document.querySelector('.modal__review__title');
var modalText = document.querySelector('.modal__review__text');


for(let i = 0; i < reviewsButtons.length; i++){

    let buttonCurrent = reviewsButtons[i];
    let titleCurrent = reviewsTitle[i];
    let textCurrent = reviewsText[i];

    buttonCurrent.addEventListener('click', function(event){
        event.preventDefault();

        modalTitle.textContent = titleCurrent.textContent;
        modalText.textContent = textCurrent.textContent;

        
        $('#revievModal').arcticmodal();

        
    })
}


//  ------------------------------  map

// function initMap(){
//     var element = document.getElementById('map');
//     var  options = {
//         zoom:5,
//         center: {lat:59.93863, lng:30.31413}
//     };
//     var myMap = new google.maps.Map(element, options); 
// }

//  ------------------------------  video

    // Video
    var video = document.getElementById("video");
    // Buttons
    var playButton = document.getElementById("play-pause");
    var muteButton = document.getElementById("mute");
    // Sliders
    var seekBar = document.getElementById("seek-bar");
    var volumeBar = document.getElementById("volume-bar");
  
  // play/pause button
  playButton.addEventListener("click", function() {
    if (video.paused == true) {
      video.play();
    //   playButton.innerHTML = "Pause";
    } else {
      video.pause();
    //   playButton.innerHTML = "Play";
    }
  });

  //  mute button
muteButton.addEventListener("click", function() {
    if (video.muted == false) {
      video.muted = true;
      muteButton.innerHTML = "Unmute";
    } else {
      video.muted = false;
      muteButton.innerHTML = "Mute";
    }
  });

  //seek bar
seekBar.addEventListener("change", function() {
    var time = video.duration * (seekBar.value / 100);
    video.currentTime = time;
  });
video.addEventListener("timeupdate", function() {
    var value = (100 / video.duration) * video.currentTime;
    seekBar.value = value;
  });

  // Pause video

seekBar.addEventListener("mousedown", function() {
    video.pause();
  });
  
  // Play video
  seekBar.addEventListener("mouseup", function() {
    video.play();
  });

  // volume bar
volumeBar.addEventListener("change", function() {
    video.volume = volumeBar.value;
  });
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8vICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gIHBhZ2VwaWxpbmdcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG5cdCQoJyNwYWdlcGlsaW5nJykucGFnZXBpbGluZyh7XHJcbiAgICAgICAgYW5jaG9yczogWydmaXJzdFBhZ2UnLCAnc2Vjb25kUGFnZScsICd0aGlyZFBhZ2UnLCAnZm91cnRoUGFnZScsICdmaWZ0aFBhZ2UnLCAnc2l4dGhQYWdlJywgJ3NldmVudGhQYWdlJywgJ2VpZ2h0UGFnZScsJ25pbnRoUGFnZSddLFxyXG4gICAgICAgIG1lbnU6ICcjbXlNZW51J1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLy8gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgbW9kYWxcclxuXHJcblxyXG5sZXQgYnVyZ2VyTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXJnZXItbWVudScpO1xyXG5sZXQgbmF2TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2LW1vZGFsJyk7XHJcbmxldCBtb2RhbENsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdi1tb2RhbF9fY2xvc2UnKTtcclxubGV0IG1vZGFsSXRlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ25hdi1tb2RhbF9faXRlbScpO1xyXG5cclxuXHJcbmJ1cmdlck1lbnUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgbmF2TW9kYWwuY2xhc3NMaXN0LmFkZCgnbmF2LW1vZGFsX19hY3RpdmUnKTtcclxufSlcclxuXHJcbmZvcihsZXQgaSA9IDA7IGkgPCBtb2RhbEl0ZW0ubGVuZ3RoOyBpKyspe1xyXG5cclxuICAgIGxldCBtb2RhbEl0ZW1DdXJlbnQgPSBtb2RhbEl0ZW1baV07XHJcblxyXG4gICAgbW9kYWxJdGVtQ3VyZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBuYXZNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCduYXYtbW9kYWxfX2FjdGl2ZScpO1xyXG5cclxuICAgIH0pXHJcbn1cclxubW9kYWxDbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICBuYXZNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCduYXYtbW9kYWxfX2FjdGl2ZScpO1xyXG59KVxyXG5cclxuLy8gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgc2xpZGVfX2NvbXBvc2l0aW9uXHJcblxyXG5jb25zdCBjb21wb3NpdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NsaWRlX19jb21wb3NpdGlvbicpO1xyXG5jb25zdCBjb21wTWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NvbXBvc290aW9uX19tZW51Jyk7XHJcblxyXG5mb3IobGV0IGkgPSAwOyBpPGNvbXBvc2l0aW9uLmxlbmd0aDsgaSsrKXtcclxuICAgIGxldCBjb21wb3NpdGlvbkN1cmVudCA9IGNvbXBvc2l0aW9uW2ldO1xyXG4gICAgbGV0IGNvbXBNZW51Q3VyZW50ID0gY29tcE1lbnVbaV07XHJcblxyXG4gICAgY29tcG9zaXRpb25DdXJlbnQub25tb3VzZWVudGVyID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBjb21wTWVudUN1cmVudC5jbGFzc0xpc3QuYWRkKCdjb21wb3NvdGlvbl9fbWVudV9fYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgICBjb21wb3NpdGlvbkN1cmVudC5vbm1vdXNlbGVhdmUgID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBjb21wTWVudUN1cmVudC5jbGFzc0xpc3QucmVtb3ZlKCdjb21wb3NvdGlvbl9fbWVudV9fYWN0aXZlJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuLy8gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgdGVhbVxyXG5cclxuY29uc3QgdGVhbUl0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0ZWFtX19pdGVtJyk7XHJcbmNvbnN0IHRlYW1JdGVtVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0ZWFtX19pdGVtLXRpdGxlJyk7XHJcblxyXG5mb3IodmFyIGkgPSAwOyBpIDwgdGVhbUl0ZW1UaXRsZS5sZW5ndGg7IGkrKyl7XHJcblxyXG4gICAgbGV0IHRlYW1JdGVtQ3VyZW50ID0gdGVhbUl0ZW1baV07XHJcbiAgICBcclxuICAgIHRlYW1JdGVtVGl0bGVbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKCEodGVhbUl0ZW1DdXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0ZWFtX19pdGVtX19hY3RpdmUnKSkpe1xyXG5cclxuICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IG1lbnVJdGVtLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgIHRlYW1JdGVtW2pdLmNsYXNzTGlzdC5yZW1vdmUoJ3RlYW1fX2l0ZW1fX2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRlYW1JdGVtQ3VyZW50LmNsYXNzTGlzdC5hZGQoJ3RlYW1fX2l0ZW1fX2FjdGl2ZScpO1xyXG5cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGVhbUl0ZW1DdXJlbnQuY2xhc3NMaXN0LnJlbW92ZSgndGVhbV9faXRlbV9fYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSkgICBcclxufVxyXG5cclxuXHJcbi8vICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gIG1lbnVcclxuXHJcblxyXG5jb25zdCBtZW51SXRlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21lbnVfX2l0ZW0nKTtcclxuY29uc3QgbWVudUxpbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtZW51X19saW5rJyk7XHJcbmNvbnN0IG1lbnVUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbWVudV9faXRlbS10ZXh0Jyk7XHJcbmNvbnN0IG1lbnVJdGVtQ2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtZW51X19pdGVtX19jbG9zZScpO1xyXG5cclxuZnVuY3Rpb24gY2FsY3VsV2lkdGgoKXtcclxuICAgIGxldCB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xyXG4gICAgbGV0IGxpbmtzID0gJCgnLm1lbnVfX2xpbmsnKTtcclxuICAgIGxldCBsaW5rV2lkdGggPSBsaW5rcy53aWR0aCgpO1xyXG4gICAgbGV0IHRvdGFsV2lkdGggPSB3aW5kb3dXaWR0aCAtIGxpbmtXaWR0aCAqIGxpbmtzLmxlbmd0aDtcclxuXHJcbiAgICByZXR1cm4gdG90YWxXaWR0aCA+IDU1MCA/IDU1MCA6IHRvdGFsV2lkdGg7XHJcbn0gXHJcbmZvcih2YXIgaSA9IDA7IGkgPCBtZW51TGluay5sZW5ndGg7IGkrKyl7XHJcblxyXG4gICAgbGV0IG1lbnVJdGVtQ3VyZW50ID0gbWVudUl0ZW1baV07XHJcbiAgICBsZXQgbWVudVRleHRDdXJlbnQgPSBtZW51VGV4dFtpXTtcclxuICAgIFxyXG4gICAgbWVudUxpbmtbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKCEobWVudUl0ZW1DdXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZW51X19pdGVtX19hY3RpdmUnKSkpe1xyXG5cclxuICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IG1lbnVJdGVtLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgIG1lbnVJdGVtW2pdLmNsYXNzTGlzdC5yZW1vdmUoJ21lbnVfX2l0ZW1fX2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgbWVudVRleHRbal0uc3R5bGUud2lkdGggPSAwICsgJ3B4JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtZW51SXRlbUN1cmVudC5jbGFzc0xpc3QuYWRkKCdtZW51X19pdGVtX19hY3RpdmUnKTtcclxuICAgICAgICAgICAgbWVudVRleHRDdXJlbnQuc3R5bGUud2lkdGggPSBjYWxjdWxXaWR0aCgpICsgJ3B4JztcclxuXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIG1lbnVJdGVtQ3VyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ21lbnVfX2l0ZW1fX2FjdGl2ZScpO1xyXG4gICAgICAgICAgICBtZW51VGV4dEN1cmVudC5zdHlsZS53aWR0aCA9IDAgKyAncHgnO1xyXG4gICAgICAgIH1cclxuICAgIH0pICAgXHJcblxyXG4gICAgbWVudUl0ZW1DbG9zZVtpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgbWVudUl0ZW1DdXJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnbWVudV9faXRlbV9fYWN0aXZlJyk7XHJcbiAgICAgICAgbWVudVRleHRDdXJlbnQuc3R5bGUud2lkdGggPSAwICsgJ3B4JztcclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG4vLyAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICBzbGlkZXJcclxuXHJcbiQoJy5zbGlkZXJfX2l0ZW1zJykuc2xpY2soe1xyXG4gICAgYXV0b3BsYXk6IGZhbHNlXHJcblxyXG59KTtcclxuIFxyXG4vLyAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICBmb3JtXHJcblxyXG52YXIgbXlGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxudmFyIHNlbmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX19zZW5kJyk7XHJcblxyXG52YXIgbW9kYWxGb3JtVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fZm9ybV9fdGV4dCcpO1xyXG5cclxubXlGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBsZXQgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICBcclxuICAgIGZvcm1EYXRhLmFwcGVuZCgnbmFtZScsIHRhcmdldC5lbGVtZW50cy5uYW1lLnZhbHVlKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZCgncGhvbmUnLCB0YXJnZXQuZWxlbWVudHMudGVsZXBob25lLnZhbHVlKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZCgnY29tbWVudCcsIHRhcmdldC5lbGVtZW50cy5jb21lbnQudmFsdWUpO1xyXG4gICAgZm9ybURhdGEuYXBwZW5kKCd0bycsICdhcm1hbmkwMzIyQGdtYWlsLmNvbScpO1xyXG5cclxuICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcclxuICAgIHhoci5vcGVuKCdQT1NUJywgJ2h0dHBzOi8vd2ViZGV2LWFwaS5sb2Z0c2Nob29sLmNvbS9zZW5kbWFpbCcpO1xyXG4gICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ1gtUmVxdWVzdGVkLVdpdGgnLCAnWE1MSHR0cFJlcXVlc3QnKTtcclxuICAgIHhoci5zZW5kKGZvcm1EYXRhKTtcclxuXHJcbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbW9kYWxGb3JtVGV4dC50ZXh0Q29udGVudCA9IHhoci5yZXNwb25zZS5tZXNzYWdlO1xyXG4gICAgICAgICQoJyNmb3JtTW9kYWwnKS5hcmN0aWNtb2RhbCgpO1xyXG5cclxuICAgIH0pXHJcbn0pXHJcblxyXG4vLyAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICByZXZpZXdzXHJcblxyXG52YXIgcmV2aWV3c0J1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnV0dG9uX19yZXZpZXdzJyk7XHJcbnZhciByZXZpZXdzVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGV4dGJsb2NrX190aXRsZScpO1xyXG52YXIgcmV2aWV3c1RleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGV4dGJsb2NrX190ZXh0Jyk7XHJcblxyXG52YXIgbW9kYWxUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fcmV2aWV3X190aXRsZScpO1xyXG52YXIgbW9kYWxUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19yZXZpZXdfX3RleHQnKTtcclxuXHJcblxyXG5mb3IobGV0IGkgPSAwOyBpIDwgcmV2aWV3c0J1dHRvbnMubGVuZ3RoOyBpKyspe1xyXG5cclxuICAgIGxldCBidXR0b25DdXJyZW50ID0gcmV2aWV3c0J1dHRvbnNbaV07XHJcbiAgICBsZXQgdGl0bGVDdXJyZW50ID0gcmV2aWV3c1RpdGxlW2ldO1xyXG4gICAgbGV0IHRleHRDdXJyZW50ID0gcmV2aWV3c1RleHRbaV07XHJcblxyXG4gICAgYnV0dG9uQ3VycmVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBtb2RhbFRpdGxlLnRleHRDb250ZW50ID0gdGl0bGVDdXJyZW50LnRleHRDb250ZW50O1xyXG4gICAgICAgIG1vZGFsVGV4dC50ZXh0Q29udGVudCA9IHRleHRDdXJyZW50LnRleHRDb250ZW50O1xyXG5cclxuICAgICAgICBcclxuICAgICAgICAkKCcjcmV2aWV2TW9kYWwnKS5hcmN0aWNtb2RhbCgpO1xyXG5cclxuICAgICAgICBcclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG4vLyAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICBtYXBcclxuXHJcbi8vIGZ1bmN0aW9uIGluaXRNYXAoKXtcclxuLy8gICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpO1xyXG4vLyAgICAgdmFyICBvcHRpb25zID0ge1xyXG4vLyAgICAgICAgIHpvb206NSxcclxuLy8gICAgICAgICBjZW50ZXI6IHtsYXQ6NTkuOTM4NjMsIGxuZzozMC4zMTQxM31cclxuLy8gICAgIH07XHJcbi8vICAgICB2YXIgbXlNYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGVsZW1lbnQsIG9wdGlvbnMpOyBcclxuLy8gfVxyXG5cclxuLy8gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgdmlkZW9cclxuXHJcbiAgICAvLyBWaWRlb1xyXG4gICAgdmFyIHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb1wiKTtcclxuICAgIC8vIEJ1dHRvbnNcclxuICAgIHZhciBwbGF5QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5LXBhdXNlXCIpO1xyXG4gICAgdmFyIG11dGVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm11dGVcIik7XHJcbiAgICAvLyBTbGlkZXJzXHJcbiAgICB2YXIgc2Vla0JhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2Vlay1iYXJcIik7XHJcbiAgICB2YXIgdm9sdW1lQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2b2x1bWUtYmFyXCIpO1xyXG4gIFxyXG4gIC8vIHBsYXkvcGF1c2UgYnV0dG9uXHJcbiAgcGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAodmlkZW8ucGF1c2VkID09IHRydWUpIHtcclxuICAgICAgdmlkZW8ucGxheSgpO1xyXG4gICAgLy8gICBwbGF5QnV0dG9uLmlubmVySFRNTCA9IFwiUGF1c2VcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZpZGVvLnBhdXNlKCk7XHJcbiAgICAvLyAgIHBsYXlCdXR0b24uaW5uZXJIVE1MID0gXCJQbGF5XCI7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vICBtdXRlIGJ1dHRvblxyXG5tdXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgIGlmICh2aWRlby5tdXRlZCA9PSBmYWxzZSkge1xyXG4gICAgICB2aWRlby5tdXRlZCA9IHRydWU7XHJcbiAgICAgIG11dGVCdXR0b24uaW5uZXJIVE1MID0gXCJVbm11dGVcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZpZGVvLm11dGVkID0gZmFsc2U7XHJcbiAgICAgIG11dGVCdXR0b24uaW5uZXJIVE1MID0gXCJNdXRlXCI7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vc2VlayBiYXJcclxuc2Vla0Jhci5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHRpbWUgPSB2aWRlby5kdXJhdGlvbiAqIChzZWVrQmFyLnZhbHVlIC8gMTAwKTtcclxuICAgIHZpZGVvLmN1cnJlbnRUaW1lID0gdGltZTtcclxuICB9KTtcclxudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcInRpbWV1cGRhdGVcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdmFsdWUgPSAoMTAwIC8gdmlkZW8uZHVyYXRpb24pICogdmlkZW8uY3VycmVudFRpbWU7XHJcbiAgICBzZWVrQmFyLnZhbHVlID0gdmFsdWU7XHJcbiAgfSk7XHJcblxyXG4gIC8vIFBhdXNlIHZpZGVvXHJcblxyXG5zZWVrQmFyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24oKSB7XHJcbiAgICB2aWRlby5wYXVzZSgpO1xyXG4gIH0pO1xyXG4gIFxyXG4gIC8vIFBsYXkgdmlkZW9cclxuICBzZWVrQmFyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgdmlkZW8ucGxheSgpO1xyXG4gIH0pO1xyXG5cclxuICAvLyB2b2x1bWUgYmFyXHJcbnZvbHVtZUJhci5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgdmlkZW8udm9sdW1lID0gdm9sdW1lQmFyLnZhbHVlO1xyXG4gIH0pOyJdfQ==

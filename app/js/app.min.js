
//  ------------------------------  pagepiling

$(document).ready(function() {
	$('#pagepiling').pagepiling({
        anchors: ['firstPage', 'secondPage', 'thirdPage', 'fourthPage', 'fifthPage', 'sixthPage', 'seventhPage', 'eightPage','ninthPage'],
        menu: '#myMenu'
    });
});

//  ------------------------------  modal


let burgerMenu = document.querySelector('.burger-menu');
let navModal = document.querySelector('.nav-modal');
let modalClose = document.querySelector('.nav-modal__close');
let modalItem = document.getElementsByClassName('nav-modal__item');


burgerMenu.addEventListener('click', function(){
    navModal.classList.add('nav-modal__active');
})

for(let i = 0; i < modalItem.length; i++){

    let modalItemCurent = modalItem[i];

    modalItemCurent.addEventListener('click', function(){
        navModal.classList.remove('nav-modal__active');

    })
}
modalClose.addEventListener('click', function(){
    navModal.classList.remove('nav-modal__active');
})

//  ------------------------------  slide__composition

const composition = document.getElementsByClassName('slide__composition');
const compMenu = document.getElementsByClassName('composotion__menu');

for(let i = 0; i<composition.length; i++){
    let compositionCurent = composition[i];
    let compMenuCurent = compMenu[i];

    compositionCurent.onmouseenter = function(){
        compMenuCurent.classList.add('composotion__menu__active');
    }
    compositionCurent.onmouseleave  = function(){
        compMenuCurent.classList.remove('composotion__menu__active');
    }
}



//  ------------------------------  team

const teamItem = document.getElementsByClassName('team__item');
const teamItemTitle = document.getElementsByClassName('team__item-title');

for(var i = 0; i < teamItemTitle.length; i++){

    let teamItemCurent = teamItem[i];
    
    teamItemTitle[i].addEventListener('click', function(){
        
        if(!(teamItemCurent.classList.contains('team__item__active'))){

            for(var j = 0; j < menuItem.length; j++){
                teamItem[j].classList.remove('team__item__active');
            }
            teamItemCurent.classList.add('team__item__active');

        }else{
            teamItemCurent.classList.remove('team__item__active');
        }
    })   
}


//  ------------------------------  menu


const menuItem = document.getElementsByClassName('menu__item');
const menuLink = document.getElementsByClassName('menu__link');
const menuText = document.getElementsByClassName('menu__item-text');
const menuItemClose = document.getElementsByClassName('menu__item__close');

function calculWidth(){
    let windowWidth = $(window).width();
    let links = $('.menu__link');
    let linkWidth = links.width();
    let totalWidth = windowWidth - linkWidth * links.length;

    return totalWidth > 550 ? 550 : totalWidth;
} 
for(var i = 0; i < menuLink.length; i++){

    let menuItemCurent = menuItem[i];
    let menuTextCurent = menuText[i];
    
    menuLink[i].addEventListener('click', function(){
        
        if(!(menuItemCurent.classList.contains('menu__item__active'))){

            for(var j = 0; j < menuItem.length; j++){
                menuItem[j].classList.remove('menu__item__active');
                menuText[j].style.width = 0 + 'px';
            }
            menuItemCurent.classList.add('menu__item__active');
            menuTextCurent.style.width = calculWidth() + 'px';

        }else{
            menuItemCurent.classList.remove('menu__item__active');
            menuTextCurent.style.width = 0 + 'px';
        }
    })   

    menuItemClose[i].addEventListener('click', function(){
        menuItemCurent.classList.remove('menu__item__active');
        menuTextCurent.style.width = 0 + 'px';
    })
}


//  ------------------------------  slider

$('.slider__items').slick({
    autoplay: false

});
 
//  ------------------------------  form

var myForm = document.querySelector('.form');
var sendButton = document.querySelector('.button__send');

var modalFormText = document.querySelector('.modal__form__text');

myForm.addEventListener('submit', function(event){
    event.preventDefault();
    let target = event.target;
    var formData = new FormData();
    
    formData.append('name', target.elements.name.value);
    formData.append('phone', target.elements.telephone.value);
    formData.append('comment', target.elements.coment.value);
    formData.append('to', 'armani0322@gmail.com');

    const xhr = new XMLHttpRequest();
    xhr.responseType = 'json';
    xhr.open('POST', 'https://webdev-api.loftschool.com/sendmail');
    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
    xhr.send(formData);

    xhr.addEventListener('load', function(){
        
        modalFormText.textContent = xhr.response.message;
        $('#formModal').arcticmodal();

    })
})

//  ------------------------------  reviews

var reviewsButtons = document.querySelectorAll('.button__reviews');
var reviewsTitle = document.querySelectorAll('.textblock__title');
var reviewsText = document.querySelectorAll('.textblock__text');

var modalTitle = document.querySelector('.modal__review__title');
var modalText = document.querySelector('.modal__review__text');


for(let i = 0; i < reviewsButtons.length; i++){

    let buttonCurrent = reviewsButtons[i];
    let titleCurrent = reviewsTitle[i];
    let textCurrent = reviewsText[i];

    buttonCurrent.addEventListener('click', function(event){
        event.preventDefault();

        modalTitle.textContent = titleCurrent.textContent;
        modalText.textContent = textCurrent.textContent;

        
        $('#revievModal').arcticmodal();

        
    })
}


//  ------------------------------  map

ymaps.ready(init);
      
        function init(){ 
            var myMap = new ymaps.Map("map", {
                center: [59.93863, 30.31413],
                zoom: 12
            }); 
            
            var myPlacemark = new ymaps.Placemark([59.970531, 30.311384], {}, {
                iconLayout: 'default#image',
                iconImageHref: './img/map/map-marker.svg',
                iconImageSize: [30, 42]
            });
             
            myMap.geoObjects.add(myPlacemark);

            var myPlacemark2 = new ymaps.Placemark([59.948862, 30.382144], {}, {
                iconLayout: 'default#image',
                iconImageHref: './img/map/map-marker.svg',
                iconImageSize: [30, 42]
            });
             
            myMap.geoObjects.add(myPlacemark2);

            var myPlacemark3 = new ymaps.Placemark([59.905637, 30.312023], {}, {
                iconLayout: 'default#image',
                iconImageHref: './img/map/map-marker.svg',
                iconImageSize: [30, 42]
            });
             
            myMap.geoObjects.add(myPlacemark3);

            var myPlacemark4 = new ymaps.Placemark([59.912545, 30.493221], {}, {
                iconLayout: 'default#image',
                iconImageHref: './img/map/map-marker.svg',
                iconImageSize: [30, 42]
            });
             
            myMap.geoObjects.add(myPlacemark4);
        }
 
            


//  ------------------------------  video

    // Video
    var video = document.getElementById("video");
    // Buttons
    var playButton = document.getElementById("play-pause");
    var muteButton = document.getElementById("mute");
    // Sliders
    var seekBar = document.getElementById("seek-bar");
    var volumeBar = document.getElementById("volume-bar");
  
  // play/pause button
  playButton.addEventListener("click", function() {
    if (video.paused == true) {
      video.play();
    //   playButton.innerHTML = "Pause";
    } else {
      video.pause();
    //   playButton.innerHTML = "Play";
    }
  });

  //  mute button
muteButton.addEventListener("click", function() {
    if (video.muted == false) {
      video.muted = true;
      muteButton.innerHTML = "Unmute";
    } else {
      video.muted = false;
      muteButton.innerHTML = "Mute";
    }
  });

  //seek bar
seekBar.addEventListener("change", function() {
    var time = video.duration * (seekBar.value / 100);
    video.currentTime = time;
  });
video.addEventListener("timeupdate", function() {
    var value = (100 / video.duration) * video.currentTime;
    seekBar.value = value;
  });

  // Pause video

seekBar.addEventListener("mousedown", function() {
    video.pause();
  });
  
  // Play video
  seekBar.addEventListener("mouseup", function() {
    video.play();
  });

  // volume bar
volumeBar.addEventListener("change", function() {
    video.volume = volumeBar.value;
  });
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4vLyAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICBwYWdlcGlsaW5nXHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuXHQkKCcjcGFnZXBpbGluZycpLnBhZ2VwaWxpbmcoe1xyXG4gICAgICAgIGFuY2hvcnM6IFsnZmlyc3RQYWdlJywgJ3NlY29uZFBhZ2UnLCAndGhpcmRQYWdlJywgJ2ZvdXJ0aFBhZ2UnLCAnZmlmdGhQYWdlJywgJ3NpeHRoUGFnZScsICdzZXZlbnRoUGFnZScsICdlaWdodFBhZ2UnLCduaW50aFBhZ2UnXSxcclxuICAgICAgICBtZW51OiAnI215TWVudSdcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gIG1vZGFsXHJcblxyXG5cclxubGV0IGJ1cmdlck1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2VyLW1lbnUnKTtcclxubGV0IG5hdk1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdi1tb2RhbCcpO1xyXG5sZXQgbW9kYWxDbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXYtbW9kYWxfX2Nsb3NlJyk7XHJcbmxldCBtb2RhbEl0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCduYXYtbW9kYWxfX2l0ZW0nKTtcclxuXHJcblxyXG5idXJnZXJNZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgIG5hdk1vZGFsLmNsYXNzTGlzdC5hZGQoJ25hdi1tb2RhbF9fYWN0aXZlJyk7XHJcbn0pXHJcblxyXG5mb3IobGV0IGkgPSAwOyBpIDwgbW9kYWxJdGVtLmxlbmd0aDsgaSsrKXtcclxuXHJcbiAgICBsZXQgbW9kYWxJdGVtQ3VyZW50ID0gbW9kYWxJdGVtW2ldO1xyXG5cclxuICAgIG1vZGFsSXRlbUN1cmVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgbmF2TW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnbmF2LW1vZGFsX19hY3RpdmUnKTtcclxuXHJcbiAgICB9KVxyXG59XHJcbm1vZGFsQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgbmF2TW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnbmF2LW1vZGFsX19hY3RpdmUnKTtcclxufSlcclxuXHJcbi8vICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gIHNsaWRlX19jb21wb3NpdGlvblxyXG5cclxuY29uc3QgY29tcG9zaXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzbGlkZV9fY29tcG9zaXRpb24nKTtcclxuY29uc3QgY29tcE1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjb21wb3NvdGlvbl9fbWVudScpO1xyXG5cclxuZm9yKGxldCBpID0gMDsgaTxjb21wb3NpdGlvbi5sZW5ndGg7IGkrKyl7XHJcbiAgICBsZXQgY29tcG9zaXRpb25DdXJlbnQgPSBjb21wb3NpdGlvbltpXTtcclxuICAgIGxldCBjb21wTWVudUN1cmVudCA9IGNvbXBNZW51W2ldO1xyXG5cclxuICAgIGNvbXBvc2l0aW9uQ3VyZW50Lm9ubW91c2VlbnRlciA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY29tcE1lbnVDdXJlbnQuY2xhc3NMaXN0LmFkZCgnY29tcG9zb3Rpb25fX21lbnVfX2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gICAgY29tcG9zaXRpb25DdXJlbnQub25tb3VzZWxlYXZlICA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY29tcE1lbnVDdXJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnY29tcG9zb3Rpb25fX21lbnVfX2FjdGl2ZScpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbi8vICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gIHRlYW1cclxuXHJcbmNvbnN0IHRlYW1JdGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndGVhbV9faXRlbScpO1xyXG5jb25zdCB0ZWFtSXRlbVRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndGVhbV9faXRlbS10aXRsZScpO1xyXG5cclxuZm9yKHZhciBpID0gMDsgaSA8IHRlYW1JdGVtVGl0bGUubGVuZ3RoOyBpKyspe1xyXG5cclxuICAgIGxldCB0ZWFtSXRlbUN1cmVudCA9IHRlYW1JdGVtW2ldO1xyXG4gICAgXHJcbiAgICB0ZWFtSXRlbVRpdGxlW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBcclxuICAgICAgICBpZighKHRlYW1JdGVtQ3VyZW50LmNsYXNzTGlzdC5jb250YWlucygndGVhbV9faXRlbV9fYWN0aXZlJykpKXtcclxuXHJcbiAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBtZW51SXRlbS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICB0ZWFtSXRlbVtqXS5jbGFzc0xpc3QucmVtb3ZlKCd0ZWFtX19pdGVtX19hY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0ZWFtSXRlbUN1cmVudC5jbGFzc0xpc3QuYWRkKCd0ZWFtX19pdGVtX19hY3RpdmUnKTtcclxuXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRlYW1JdGVtQ3VyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3RlYW1fX2l0ZW1fX2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pICAgXHJcbn1cclxuXHJcblxyXG4vLyAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICBtZW51XHJcblxyXG5cclxuY29uc3QgbWVudUl0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtZW51X19pdGVtJyk7XHJcbmNvbnN0IG1lbnVMaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbWVudV9fbGluaycpO1xyXG5jb25zdCBtZW51VGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21lbnVfX2l0ZW0tdGV4dCcpO1xyXG5jb25zdCBtZW51SXRlbUNsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbWVudV9faXRlbV9fY2xvc2UnKTtcclxuXHJcbmZ1bmN0aW9uIGNhbGN1bFdpZHRoKCl7XHJcbiAgICBsZXQgd2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcclxuICAgIGxldCBsaW5rcyA9ICQoJy5tZW51X19saW5rJyk7XHJcbiAgICBsZXQgbGlua1dpZHRoID0gbGlua3Mud2lkdGgoKTtcclxuICAgIGxldCB0b3RhbFdpZHRoID0gd2luZG93V2lkdGggLSBsaW5rV2lkdGggKiBsaW5rcy5sZW5ndGg7XHJcblxyXG4gICAgcmV0dXJuIHRvdGFsV2lkdGggPiA1NTAgPyA1NTAgOiB0b3RhbFdpZHRoO1xyXG59IFxyXG5mb3IodmFyIGkgPSAwOyBpIDwgbWVudUxpbmsubGVuZ3RoOyBpKyspe1xyXG5cclxuICAgIGxldCBtZW51SXRlbUN1cmVudCA9IG1lbnVJdGVtW2ldO1xyXG4gICAgbGV0IG1lbnVUZXh0Q3VyZW50ID0gbWVudVRleHRbaV07XHJcbiAgICBcclxuICAgIG1lbnVMaW5rW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBcclxuICAgICAgICBpZighKG1lbnVJdGVtQ3VyZW50LmNsYXNzTGlzdC5jb250YWlucygnbWVudV9faXRlbV9fYWN0aXZlJykpKXtcclxuXHJcbiAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBtZW51SXRlbS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBtZW51SXRlbVtqXS5jbGFzc0xpc3QucmVtb3ZlKCdtZW51X19pdGVtX19hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIG1lbnVUZXh0W2pdLnN0eWxlLndpZHRoID0gMCArICdweCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWVudUl0ZW1DdXJlbnQuY2xhc3NMaXN0LmFkZCgnbWVudV9faXRlbV9fYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIG1lbnVUZXh0Q3VyZW50LnN0eWxlLndpZHRoID0gY2FsY3VsV2lkdGgoKSArICdweCc7XHJcblxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBtZW51SXRlbUN1cmVudC5jbGFzc0xpc3QucmVtb3ZlKCdtZW51X19pdGVtX19hY3RpdmUnKTtcclxuICAgICAgICAgICAgbWVudVRleHRDdXJlbnQuc3R5bGUud2lkdGggPSAwICsgJ3B4JztcclxuICAgICAgICB9XHJcbiAgICB9KSAgIFxyXG5cclxuICAgIG1lbnVJdGVtQ2xvc2VbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIG1lbnVJdGVtQ3VyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ21lbnVfX2l0ZW1fX2FjdGl2ZScpO1xyXG4gICAgICAgIG1lbnVUZXh0Q3VyZW50LnN0eWxlLndpZHRoID0gMCArICdweCc7XHJcbiAgICB9KVxyXG59XHJcblxyXG5cclxuLy8gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgc2xpZGVyXHJcblxyXG4kKCcuc2xpZGVyX19pdGVtcycpLnNsaWNrKHtcclxuICAgIGF1dG9wbGF5OiBmYWxzZVxyXG5cclxufSk7XHJcbiBcclxuLy8gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgZm9ybVxyXG5cclxudmFyIG15Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcbnZhciBzZW5kQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl9fc2VuZCcpO1xyXG5cclxudmFyIG1vZGFsRm9ybVRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvcm1fX3RleHQnKTtcclxuXHJcbm15Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbihldmVudCl7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgbGV0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcclxuICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgXHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ25hbWUnLCB0YXJnZXQuZWxlbWVudHMubmFtZS52YWx1ZSk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ3Bob25lJywgdGFyZ2V0LmVsZW1lbnRzLnRlbGVwaG9uZS52YWx1ZSk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ2NvbW1lbnQnLCB0YXJnZXQuZWxlbWVudHMuY29tZW50LnZhbHVlKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZCgndG8nLCAnYXJtYW5pMDMyMkBnbWFpbC5jb20nKTtcclxuXHJcbiAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XHJcbiAgICB4aHIub3BlbignUE9TVCcsICdodHRwczovL3dlYmRldi1hcGkubG9mdHNjaG9vbC5jb20vc2VuZG1haWwnKTtcclxuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLVJlcXVlc3RlZC1XaXRoJywgJ1hNTEh0dHBSZXF1ZXN0Jyk7XHJcbiAgICB4aHIuc2VuZChmb3JtRGF0YSk7XHJcblxyXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIFxyXG4gICAgICAgIG1vZGFsRm9ybVRleHQudGV4dENvbnRlbnQgPSB4aHIucmVzcG9uc2UubWVzc2FnZTtcclxuICAgICAgICAkKCcjZm9ybU1vZGFsJykuYXJjdGljbW9kYWwoKTtcclxuXHJcbiAgICB9KVxyXG59KVxyXG5cclxuLy8gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgcmV2aWV3c1xyXG5cclxudmFyIHJldmlld3NCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ1dHRvbl9fcmV2aWV3cycpO1xyXG52YXIgcmV2aWV3c1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRleHRibG9ja19fdGl0bGUnKTtcclxudmFyIHJldmlld3NUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRleHRibG9ja19fdGV4dCcpO1xyXG5cclxudmFyIG1vZGFsVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3Jldmlld19fdGl0bGUnKTtcclxudmFyIG1vZGFsVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fcmV2aWV3X190ZXh0Jyk7XHJcblxyXG5cclxuZm9yKGxldCBpID0gMDsgaSA8IHJldmlld3NCdXR0b25zLmxlbmd0aDsgaSsrKXtcclxuXHJcbiAgICBsZXQgYnV0dG9uQ3VycmVudCA9IHJldmlld3NCdXR0b25zW2ldO1xyXG4gICAgbGV0IHRpdGxlQ3VycmVudCA9IHJldmlld3NUaXRsZVtpXTtcclxuICAgIGxldCB0ZXh0Q3VycmVudCA9IHJldmlld3NUZXh0W2ldO1xyXG5cclxuICAgIGJ1dHRvbkN1cnJlbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgbW9kYWxUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlQ3VycmVudC50ZXh0Q29udGVudDtcclxuICAgICAgICBtb2RhbFRleHQudGV4dENvbnRlbnQgPSB0ZXh0Q3VycmVudC50ZXh0Q29udGVudDtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgJCgnI3Jldmlldk1vZGFsJykuYXJjdGljbW9kYWwoKTtcclxuXHJcbiAgICAgICAgXHJcbiAgICB9KVxyXG59XHJcblxyXG5cclxuLy8gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgbWFwXHJcblxyXG55bWFwcy5yZWFkeShpbml0KTtcclxuICAgICAgXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdCgpeyBcclxuICAgICAgICAgICAgdmFyIG15TWFwID0gbmV3IHltYXBzLk1hcChcIm1hcFwiLCB7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXI6IFs1OS45Mzg2MywgMzAuMzE0MTNdLFxyXG4gICAgICAgICAgICAgICAgem9vbTogMTJcclxuICAgICAgICAgICAgfSk7IFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIG15UGxhY2VtYXJrID0gbmV3IHltYXBzLlBsYWNlbWFyayhbNTkuOTcwNTMxLCAzMC4zMTEzODRdLCB7fSwge1xyXG4gICAgICAgICAgICAgICAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxyXG4gICAgICAgICAgICAgICAgaWNvbkltYWdlSHJlZjogJy4vaW1nL21hcC9tYXAtbWFya2VyLnN2ZycsXHJcbiAgICAgICAgICAgICAgICBpY29uSW1hZ2VTaXplOiBbMzAsIDQyXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBteU1hcC5nZW9PYmplY3RzLmFkZChteVBsYWNlbWFyayk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbXlQbGFjZW1hcmsyID0gbmV3IHltYXBzLlBsYWNlbWFyayhbNTkuOTQ4ODYyLCAzMC4zODIxNDRdLCB7fSwge1xyXG4gICAgICAgICAgICAgICAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxyXG4gICAgICAgICAgICAgICAgaWNvbkltYWdlSHJlZjogJy4vaW1nL21hcC9tYXAtbWFya2VyLnN2ZycsXHJcbiAgICAgICAgICAgICAgICBpY29uSW1hZ2VTaXplOiBbMzAsIDQyXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBteU1hcC5nZW9PYmplY3RzLmFkZChteVBsYWNlbWFyazIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG15UGxhY2VtYXJrMyA9IG5ldyB5bWFwcy5QbGFjZW1hcmsoWzU5LjkwNTYzNywgMzAuMzEyMDIzXSwge30sIHtcclxuICAgICAgICAgICAgICAgIGljb25MYXlvdXQ6ICdkZWZhdWx0I2ltYWdlJyxcclxuICAgICAgICAgICAgICAgIGljb25JbWFnZUhyZWY6ICcuL2ltZy9tYXAvbWFwLW1hcmtlci5zdmcnLFxyXG4gICAgICAgICAgICAgICAgaWNvbkltYWdlU2l6ZTogWzMwLCA0Ml1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICBcclxuICAgICAgICAgICAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQobXlQbGFjZW1hcmszKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBteVBsYWNlbWFyazQgPSBuZXcgeW1hcHMuUGxhY2VtYXJrKFs1OS45MTI1NDUsIDMwLjQ5MzIyMV0sIHt9LCB7XHJcbiAgICAgICAgICAgICAgICBpY29uTGF5b3V0OiAnZGVmYXVsdCNpbWFnZScsXHJcbiAgICAgICAgICAgICAgICBpY29uSW1hZ2VIcmVmOiAnLi9pbWcvbWFwL21hcC1tYXJrZXIuc3ZnJyxcclxuICAgICAgICAgICAgICAgIGljb25JbWFnZVNpemU6IFszMCwgNDJdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG15TWFwLmdlb09iamVjdHMuYWRkKG15UGxhY2VtYXJrNCk7XHJcbiAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgICAgIFxyXG5cclxuXHJcbi8vICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gIHZpZGVvXHJcblxyXG4gICAgLy8gVmlkZW9cclxuICAgIHZhciB2aWRlbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9cIik7XHJcbiAgICAvLyBCdXR0b25zXHJcbiAgICB2YXIgcGxheUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheS1wYXVzZVwiKTtcclxuICAgIHZhciBtdXRlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtdXRlXCIpO1xyXG4gICAgLy8gU2xpZGVyc1xyXG4gICAgdmFyIHNlZWtCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlZWstYmFyXCIpO1xyXG4gICAgdmFyIHZvbHVtZUJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidm9sdW1lLWJhclwiKTtcclxuICBcclxuICAvLyBwbGF5L3BhdXNlIGJ1dHRvblxyXG4gIHBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHZpZGVvLnBhdXNlZCA9PSB0cnVlKSB7XHJcbiAgICAgIHZpZGVvLnBsYXkoKTtcclxuICAgIC8vICAgcGxheUJ1dHRvbi5pbm5lckhUTUwgPSBcIlBhdXNlXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2aWRlby5wYXVzZSgpO1xyXG4gICAgLy8gICBwbGF5QnV0dG9uLmlubmVySFRNTCA9IFwiUGxheVwiO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLyAgbXV0ZSBidXR0b25cclxubXV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAodmlkZW8ubXV0ZWQgPT0gZmFsc2UpIHtcclxuICAgICAgdmlkZW8ubXV0ZWQgPSB0cnVlO1xyXG4gICAgICBtdXRlQnV0dG9uLmlubmVySFRNTCA9IFwiVW5tdXRlXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2aWRlby5tdXRlZCA9IGZhbHNlO1xyXG4gICAgICBtdXRlQnV0dG9uLmlubmVySFRNTCA9IFwiTXV0ZVwiO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvL3NlZWsgYmFyXHJcbnNlZWtCYXIuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbigpIHtcclxuICAgIHZhciB0aW1lID0gdmlkZW8uZHVyYXRpb24gKiAoc2Vla0Jhci52YWx1ZSAvIDEwMCk7XHJcbiAgICB2aWRlby5jdXJyZW50VGltZSA9IHRpbWU7XHJcbiAgfSk7XHJcbnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJ0aW1ldXBkYXRlXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHZhbHVlID0gKDEwMCAvIHZpZGVvLmR1cmF0aW9uKSAqIHZpZGVvLmN1cnJlbnRUaW1lO1xyXG4gICAgc2Vla0Jhci52YWx1ZSA9IHZhbHVlO1xyXG4gIH0pO1xyXG5cclxuICAvLyBQYXVzZSB2aWRlb1xyXG5cclxuc2Vla0Jhci5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgdmlkZW8ucGF1c2UoKTtcclxuICB9KTtcclxuICBcclxuICAvLyBQbGF5IHZpZGVvXHJcbiAgc2Vla0Jhci5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBmdW5jdGlvbigpIHtcclxuICAgIHZpZGVvLnBsYXkoKTtcclxuICB9KTtcclxuXHJcbiAgLy8gdm9sdW1lIGJhclxyXG52b2x1bWVCYXIuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbigpIHtcclxuICAgIHZpZGVvLnZvbHVtZSA9IHZvbHVtZUJhci52YWx1ZTtcclxuICB9KTsiXX0=
